# å‰ç«¯åç«¯æ¥å£å¯¹æ¥è¯´æ˜

## âœ… åç«¯å·²æ”¯æŒçš„åŠŸèƒ½

### 1. è·å–ä»»åŠ¡åˆ—è¡¨

**å‰ç«¯è°ƒç”¨:**
```typescript
const response = await taskApi.getTasks({ limit: 100 })
// response.items æˆ– response.data.items
```

**åç«¯æ¥å£:**
```http
GET /api/tasks?page=1&limit=100
```

**å“åº”æ ¼å¼:**
```json
{
  "data": {
    "items": [
      {
        "id": 1,
        "title": "ä»»åŠ¡æ ‡é¢˜",
        "completed": false,
        "priority": "high",
        "date": "2025-10-29",
        "time": "09:00-11:00",
        "has_reminder": true,
        "reminder_time": "2025-10-29T08:00:00",
        "description": "ä»»åŠ¡æè¿°",
        "created_at": "2025-10-28T10:00:00",
        "updated_at": "2025-10-28T10:00:00"
      }
    ],
    "pagination": {
      "page": 1,
      "limit": 100,
      "total": 10,
      "total_pages": 1,
      "has_next": false,
      "has_prev": false
    }
  }
}
```

**å­—æ®µæ˜ å°„:**
- åç«¯è¿”å›: `has_reminder` (snake_case)
- å‰ç«¯ä½¿ç”¨: `hasReminder` (camelCase)
- å¤„ç†æ–¹å¼: å‰ç«¯éœ€æ˜ å°„ `task.hasReminder = task.has_reminder`

### 2. åˆ›å»ºä»»åŠ¡

**å‰ç«¯è°ƒç”¨:**
```typescript
const newTask = await taskApi.addTask({
  title: "ä»»åŠ¡æ ‡é¢˜",
  date: "2025-10-29",
  priority: "high",
  hasReminder: true,
  reminder_time: "2025-10-29T08:00:00"
})
```

**åç«¯æ¥å£:**
```http
POST /api/tasks
Content-Type: application/json
Authorization: Bearer {token}

{
  "title": "ä»»åŠ¡æ ‡é¢˜",
  "date": "2025-10-29",
  "priority": "high",
  "has_reminder": true,
  "reminder_time": "2025-10-29T08:00:00"
}
```

**å­—æ®µæ˜ å°„è¦æ±‚:**
- å‰ç«¯å‘é€: `hasReminder` â†’ åç«¯éœ€æ¥æ”¶ `has_reminder`
- å‰ç«¯å‘é€: `reminderTime` â†’ åç«¯éœ€æ¥æ”¶ã‚‰ã‚Œã¾ã™ `reminder_time`

**æ³¨æ„:** å‰ç«¯éœ€è¦å°† camelCase è½¬æ¢ä¸º snake_case å†å‘é€

### 3. æ›´æ–°ä»»åŠ¡

**å‰ç«¯è°ƒç”¨:**
```typescript
await taskApi.updateTask(id, {
  title: "æ–°æ ‡é¢˜",
  hasReminder: false,
  reminder_time: null
})
```

**åç«¯æ¥å£:**
```http
PUT /api/tasks/{task_id}
Content-Type: application/json
Authorization: Bearer {token}

{
  "title": "æ–°æ ‡é¢˜",
  "has_reminder": false,
  "reminder_time": null
}
```

### 4. åˆ é™¤å•ä¸ªä»»åŠ¡

**å‰ç«¯è°ƒç”¨:**
```typescript
await taskApi.deleteTask(id)
```

**åç«¯æ¥å£:**
```http
DELETE /api/tasks/{task_id}
Authorization: Bearer {token}
```

**å“åº”:**
```json
{
  "message": "ä»»åŠ¡åˆ é™¤æˆåŠŸ",
  "data": {
    "id": 1,
    "title": "ä»»åŠ¡æ ‡é¢˜"
  }
}
```

### 5. æ‰¹é‡åˆ é™¤ä»»åŠ¡

**å‰ç«¯è°ƒç”¨:**
```typescript
await taskApi.batchDeleteTasks([1, 2, 3])
```

**åç«¯æ¥å£:**
```http
DELETE /api/tasks/batch
Content-Type: application/json
Authorization: Bearer {token}

{
  "task_ids": [1, 2, 3]
}
```

**å“åº”:**
```json
{
  "message": "æˆåŠŸåˆ é™¤ 3 ä¸ªä»»åŠ¡",
  "data": {
    "deleted_count": 3,
    "deleted_tasks": [
      {"id": 1, "title": "ä»»åŠ¡1"},
      {"id": 2, "title": "ä»»åŠ¡2"},
      {"id": 3, "title": "ä»»åŠ¡3"}
    ]
  }
}
```

### 6. åˆ‡æ¢ä»»åŠ¡å®ŒæˆçŠ¶æ€

**å‰ç«¯è°ƒç”¨:**
```typescript
await taskApi.toggleTask(id)
// æˆ–
await taskApi.updateTask(id, { completed: !task.completed })
```

**åç«¯æ¥å£:**
```http
PATCH /api/tasks/{task_id}/toggle
Authorization: Bearer {token}
```

**å“åº”:**
```json
{
  "data": {
    "id": 1,
    "title": "ä»»åŠ¡æ ‡é¢˜",
    "completed": true,
    ...
  }
}
```

## ğŸ“‹ å­—æ®µå‘½åçº¦å®š

### åç«¯ (snake_case)
- `has_reminder` - æ˜¯å¦æœ‰æé†’
- `reminder_time` - æé†’æ—¶é—´
- `user_id` - ç”¨æˆ·ID
- `created_at` - åˆ›å»ºæ—¶é—´
- `updated_at` - æ›´æ–°æ—¶é—´

### å‰ç«¯ (camelCase)
- `hasReminder` - æ˜¯å¦æœ‰æé†’
- `reminderTime` - æé†’æ—¶é—´
- `userId` - ç”¨æˆ·ID
- `createdAt` - åˆ›å»ºæ—¶é—´
- `updatedAt` - æ›´æ–°æ—¶é—´

## ğŸ”„ å­—æ®µæ˜ å°„å¤„ç†

### å‰ç«¯å‘é€æ•°æ®æ—¶

```typescript
// åœ¨ taskApi ä¸­å¤„ç†
const addTask = async (task: TaskCreate) => {
  // è½¬æ¢å­—æ®µåï¼šcamelCase â†’ snake_case
  const requestData = {
    ...task,
    has_reminder: task.hasReminder,
    reminder_time: task.reminderTime,
    // ç§»é™¤ camelCase å­—æ®µ
    delete requestData.hasReminder
    delete requestData.reminderTime
  }
  
  return await request('/tasks', {
    method: 'POST',
    body: JSON.stringify(requestData)
  })
}
```

### å‰ç«¯æ¥æ”¶æ•°æ®æ—¶

```typescript
// åœ¨ taskApi ä¸­å¤„ç†
const getTasks = async () => {
  const response = await request('/tasks')
  
  // è½¬æ¢å­—æ®µåï¼šsnake_case â†’ camelCase
  return response.items.map(task => ({
    ...task,
    hasReminder: task.has_reminder,
    reminderTime: task.reminder_time
  }))
}
```

## âœ… éªŒè¯æ¸…å•

- [x] åç«¯æ”¯æŒå•ä¸ªåˆ é™¤ä»»åŠ¡
- [x] åç«¯æ”¯æŒæ‰¹é‡åˆ é™¤ä»»åŠ¡  
- [x] åç«¯æ”¯æŒåˆ‡æ¢ä»»åŠ¡çŠ¶æ€
- [x] åç«¯æ”¯æŒåˆ›å»ºä»»åŠ¡ï¼ˆå«æé†’å­—æ®µï¼‰
- [x] åç«¯æ”¯æŒæ›´æ–°ä»»åŠ¡ï¼ˆå«æé†’å­—æ®µï¼‰
- [x] åç«¯è¿”å›å­—æ®µä½¿ç”¨ snake_case
- [ ] å‰ç«¯å­—æ®µæ˜ å°„å·²å®ç°ï¼ˆéœ€å‰ç«¯æ£€æŸ¥ï¼‰
- [ ] å‰ç«¯ API è°ƒç”¨å·²æ›´æ–°ï¼ˆéœ€å‰ç«¯æ£€æŸ¥ï¼‰

## ğŸ” æµ‹è¯•å»ºè®®

1. **æµ‹è¯•åˆ é™¤åŠŸèƒ½:**
   ```bash
   curl -X DELETE "http://localhost:8000/api/tasks/1" \
     -H "Authorization: Bearer TOKEN"
   ```

2. **æµ‹è¯•æ‰¹é‡åˆ é™¤:**
   ```bash
   curl -X DELETE "http://localhost:8000/api/tasks/batch" \
     -H "Authorization: Bearer TOKEN" \
     -H "Content-Type: application/json" \
     -d '{"task_ids": [1, 2, 3]}'
   ```

3. **æµ‹è¯•åˆ‡æ¢çŠ¶æ€:**
   ```bash
   curl -X PATCH "http://localhost:8000/api/tasks/1/toggle" \
     -H "Authorization: Bearer TOKEN"
   ```

