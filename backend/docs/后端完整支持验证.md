# åç«¯å®Œæ•´æ”¯æŒéªŒè¯

## âœ… å·²å®Œå…¨æ”¯æŒçš„åŠŸèƒ½

### 1. ä»»åŠ¡ CRUD æ“ä½œ

#### âœ… è·å–ä»»åŠ¡åˆ—è¡¨
- **è·¯ç”±**: `GET /api/tasks`
- **æ”¯æŒåˆ†é¡µ**: `page`, `limit` å‚æ•°
- **æ”¯æŒè¿‡æ»¤**: `date`, `completed`, `priority`, `has_reminder`
- **è¿”å›æ ¼å¼**: `{data: {items: [...], pagination: {...}}}`
- **å­—æ®µ**: åŒ…å« `has_reminder`, `reminder_time` ç­‰æ‰€æœ‰å­—æ®µ

#### âœ… åˆ›å»ºä»»åŠ¡
- **è·¯ç”±**: `POST /api/tasks`
- **æ”¯æŒå­—æ®µ**: `title`, `description`, `priority`, `date`, `time`, `has_reminder`, `reminder_time`
- **è¿”å›**: å®Œæ•´ä»»åŠ¡å¯¹è±¡ï¼ˆåŒ…å« `has_reminder`, `reminder_time`ï¼‰
- **è°ƒè¯•æ—¥å¿—**: å·²æ·»åŠ å®Œæ•´æ—¥å¿—

#### âœ… æ›´æ–°ä»»åŠ¡
- **è·¯ç”±**: `PUT /api/tasks/{task_id}`
- **æ”¯æŒéƒ¨åˆ†æ›´æ–°**: æ‰€æœ‰å­—æ®µå¯é€‰
- **æ”¯æŒå–æ¶ˆæé†’**: `reminder_time: null`
- **è¿”å›**: æ›´æ–°åçš„å®Œæ•´ä»»åŠ¡å¯¹è±¡

#### âœ… åˆ é™¤å•ä¸ªä»»åŠ¡
- **è·¯ç”±**: `DELETE /api/tasks/{task_id}`
- **è¿”å›æ ¼å¼**: `{message: "...", data: {id, title}}`
- **æ—¥å¿—è®°å½•**: å·²æ·»åŠ åˆ é™¤æ—¥å¿—

#### âœ… æ‰¹é‡åˆ é™¤ä»»åŠ¡
- **è·¯ç”±**: `DELETE /api/tasks/batch`
- **è¯·æ±‚ä½“**: `{task_ids: [1, 2, 3]}`
- **è¿”å›æ ¼å¼**: `{message: "...", data: {deleted_count, deleted_tasks: [...]}}`
- **æ—¥å¿—è®°å½•**: å·²æ·»åŠ æ‰¹é‡åˆ é™¤æ—¥å¿—

#### âœ… åˆ‡æ¢ä»»åŠ¡å®ŒæˆçŠ¶æ€
- **è·¯ç”±**: `PATCH /api/tasks/{task_id}/toggle`
- **è¿”å›**: æ›´æ–°åçš„å®Œæ•´ä»»åŠ¡å¯¹è±¡

### 2. å­—æ®µæ”¯æŒ

#### âœ… æé†’å­—æ®µ
- `has_reminder`: Boolean - æ˜¯å¦æœ‰æé†’
- `reminder_time`: DateTime - æé†’æ—¶é—´ï¼ˆISO 8601æ ¼å¼ï¼‰

#### âœ… æ ‡å‡†å­—æ®µ
- `id`: Integer - ä»»åŠ¡ID
- `title`: String - ä»»åŠ¡æ ‡é¢˜
- `description`: String - ä»»åŠ¡æè¿°ï¼ˆå¯é€‰ï¼‰
- `completed`: Boolean - æ˜¯å¦å®Œæˆ
- `priority`: Enum('high', 'medium', 'low') - ä¼˜å…ˆçº§
- `date`: Date - ä»»åŠ¡æ—¥æœŸ
- `time`: String - æ—¶é—´æ®µï¼ˆå¯é€‰ï¼‰
- `created_at`: DateTime - åˆ›å»ºæ—¶é—´
- `updated_at`: DateTime - æ›´æ–°æ—¶é—´

### 3. å®‰å…¨ç‰¹æ€§

#### âœ… ç”¨æˆ·è®¤è¯
- æ‰€æœ‰æ¥å£éƒ½éœ€è¦ Bearer Token
- ä½¿ç”¨ `get_current_user` ä¾èµ–æ³¨å…¥

#### âœ… ç”¨æˆ·éš”ç¦»
- ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„ä»»åŠ¡
- åˆ é™¤/æ›´æ–°æ—¶éªŒè¯ä»»åŠ¡å½’å±

### 4. æ•°æ®éªŒè¯

#### âœ… Schema éªŒè¯
- `TaskCreate`: åˆ›å»ºæ—¶å¿…å¡«å­—æ®µéªŒè¯
- `TaskUpdate`: æ›´æ–°æ—¶å­—æ®µå¯é€‰
- æ—¥æœŸæ ¼å¼éªŒè¯: `YYYY-MM-DD`
- æ—¶é—´æ ¼å¼éªŒè¯: ISO 8601

### 5. é”™è¯¯å¤„ç†

#### âœ… HTTP çŠ¶æ€ç 
- `200 Fiction`: æˆåŠŸ
- `201 Created`: åˆ›å»ºæˆåŠŸ
- `400 Bad Request`: è¯·æ±‚æ ¼å¼é”™è¯¯
- `401 Unauthorized`: æœªè®¤è¯
- `404 Not Found`: èµ„æºä¸å­˜åœ¨

#### âœ… é”™è¯¯æ¶ˆæ¯
- æ¸…æ™°çš„é”™è¯¯æç¤º
- ä¸­æ–‡é”™è¯¯æ¶ˆæ¯

### 6. è°ƒè¯•æ”¯æŒ

#### âœ… æ—¥å¿—è®°å½•
- åˆ›å»ºä»»åŠ¡ï¼šå®Œæ•´å‚æ•°æ—¥å¿—
- åˆ é™¤ä»»åŠ¡ï¼šåˆ é™¤æ“ä½œæ—¥å¿—
- æ‰¹é‡åˆ é™¤ï¼šåˆ é™¤æ•°é‡æ—¥å¿—

## ğŸ“‹ API æ¥å£å®Œæ•´åˆ—è¡¨

| æ–¹æ³• | è·¯ç”± | åŠŸèƒ½ | çŠ¶æ€ |
|------|------|------|------|
| GET | `/api/tasks` | è·å–ä»»åŠ¡åˆ—è¡¨ï¼ˆåˆ†é¡µ+è¿‡æ»¤ï¼‰ | âœ… |
| POST | `/api/tasks` | åˆ›å»ºä»»åŠ¡ | âœ… |
| PUT | `/api/tasks/{id}` | æ›´æ–°ä»»åŠ¡ | âœ… |
| DELETE | `/api/tasks/{id}` | åˆ é™¤å•ä¸ªä»»åŠ¡ | âœ… |
| DELETE | `/api/tasks/batch` | æ‰¹é‡åˆ é™¤ä»»åŠ¡ | âœ… |
| PATCH | `/api/tasks/{id}/toggle` | åˆ‡æ¢å®ŒæˆçŠ¶æ€ | âœ… |

## ğŸ” å­—æ®µæ˜ å°„è¯´æ˜

### åç«¯è¿”å› (snake_case)
```json
{
  "has_reminder": true,
  "reminder_time": "2025-10-29T08:00:00",
  "user_id": 1,
  "created_at": "2025-10-28T10:00:00"
}
```

### å‰ç«¯æœŸæœ› (camelCase)
```typescript
{
  hasReminder: true,  // ä» has_reminder æ˜ å°„
  reminderTime: "2025-10-29T08:00:00",  // ä» reminder_time æ˜ å°„
  has_reminder: true  // åç«¯è¿”å›ï¼Œå‰ç«¯ä¹Ÿéœ€è¦ä¿ç•™
}
```

**æ³¨æ„**: å‰ç«¯ä»£ç ä¸­åŒæ—¶ä½¿ç”¨äº† `hasReminder` å’Œ `has_reminder`ï¼Œåç«¯ä¼šè¿”å› `has_reminder`ï¼Œå‰ç«¯éœ€è¦åœ¨ API å±‚åšå­—æ®µæ˜ å°„ã€‚

## âœ… æµ‹è¯•éªŒè¯

### 1. åˆ›å»ºä»»åŠ¡æµ‹è¯•
```bash
curl -X POST http://localhost:8000/api/tasks \
  -H "Authorization: Bearer TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "æµ‹è¯•ä»»åŠ¡",
    "date": "2025-10-29",
    "has_reminder": true,
    "reminder_time": "2025-10-29T08:00:00"
  }'
```

### 2. åˆ é™¤ä»»åŠ¡æµ‹è¯•
```bash
curl -X DELETE http://localhost:8000/api/tasks/1 \
  -H "Authorization: Bearer TOKEN"
```

### 3. æ‰¹é‡åˆ é™¤æµ‹è¯•
```bash
curl -X DELETE http://localhost:8000/api/tasks/batch \
  -H "Authorization: Bearer TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"task_ids": [1, 2, 3]}'
```

## ğŸ“ å‰ç«¯é€‚é…å»ºè®®

### 1. taskApi.deleteTask
```typescript
async deleteTask(id: number): Promise<void> {
  await request(`/tasks/${id}`, {
    method: 'DELETE',
    headers: {
      'Authorization': `Bearer ${getToken()}`
    }
  })
}
```

### 2. taskApi.batchDeleteTasks
```typescript
async batchDeleteTasks(taskIds: number[]): Promise<BatchDeleteResponse> {
  return await request('/tasks/batch', {
    method: 'DELETE',
    headers: {
      'Authorization': `Bearer ${getToken()}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      task_ids: taskIds  // æ³¨æ„ï¼šåç«¯æœŸæœ› task_ids
    })
  })
}
```

### 3. å­—æ®µæ˜ å°„
```typescript
// æ¥æ”¶æ•°æ®æ—¶
const task = {
  ...response.data,
  hasReminder: response.data.has_reminder,
  reminderTime: response.data.reminder_time
}

// å‘é€æ•°æ®æ—¶
const requestData = {
  ...task,
  has_reminder: task.hasReminder,
  reminder_time: task.reminderTime
}
// ç§»é™¤ camelCase å­—æ®µ
delete requestData.hasReminder
delete requestData.reminderTime
```

## âœ… æ€»ç»“

**åç«¯å·²å®Œå…¨æ”¯æŒå‰ç«¯æ‰€éœ€çš„æ‰€æœ‰åŠŸèƒ½ï¼š**

1. âœ… CRUD æ“ä½œå®Œæ•´
2. âœ… æ‰¹é‡åˆ é™¤æ”¯æŒ
3. âœ… æé†’åŠŸèƒ½å®Œæ•´
4. âœ… å­—æ®µé½å…¨ï¼ˆhas_reminder, reminder_timeï¼‰
5. âœ… å®‰å…¨éªŒè¯å®Œå–„
6. âœ… é”™è¯¯å¤„ç†å®Œå–„
7. âœ… æ—¥å¿—è®°å½•å®Œæ•´

**å‰ç«¯åªéœ€:**
1. ç¡®ä¿ API è°ƒç”¨è·¯å¾„æ­£ç¡®
2. å¤„ç†å­—æ®µåæ˜ å°„ï¼ˆsnake_case â†” camelCaseï¼‰
3. å¤„ç†æ‰¹é‡åˆ é™¤çš„è¯·æ±‚ä½“æ ¼å¼ (`task_ids`)

åç«¯å·²å‡†å¤‡å°±ç»ªï¼ğŸ‰

